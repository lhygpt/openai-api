import openai import os from flask import Flask, request, jsonify # 设置OpenAI API密钥 openai.api_key = os.environ["OPENAI_API_KEY"] # Flask应用程序 app = Flask(__name__) # 文本自动补全接口 @app.route("/api/completions", methods=["POST"]) def completions(): data = request.json response = openai.Completion.create( engine="davinci-codex", prompt=data["prompt"], max_tokens=data.get("max_tokens", 100), n=data.get("n", 1), temperature=data.get("temperature", 0.5), stop=data.get("stop", None), ) return jsonify(response.choices[0].text) if __name__ == '__main__': app.run()
